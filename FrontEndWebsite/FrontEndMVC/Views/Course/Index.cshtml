@using CoreLib.ClientViewModel;
@using X.PagedList;
@using X.PagedList.Mvc.Core;
@using X.PagedList.Mvc.Bootstrap4.Core;
@model IPagedList<ClassViewModel>;
@{
	ViewData["Title"] = "Index";
}

<style>
	.card:hover {
		box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);
		transform: scale(1.1);
		transition-duration: 0.3s;
	}
</style>

<br />
<div class="bd-callout" style="margin-bottom: 50px">
	<h3 style="font-family: 'MS Outlook'"> <strong>Home</strong> </h3>
</div>

@*This section is slideshow*@
<div id="carouselExampleIndicators" class="carousel carousel-dark slide carousel-fade" data-bs-ride="true" style="height: 300px;">
	<div class="carousel-indicators">
		<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
		<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
		<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
	</div>
	<div class="carousel-inner">
		<div class="carousel-item active">
			<img src="~/images/p1.jpg" class="d-block w-100" alt="..." style="width: 300px;height: 300px;">
		</div>
		<div class="carousel-item">
			<img src="~/images/p2.jpg" class="d-block w-100" alt="..." style="width: 300px;height: 300px;">
		</div>
		<div class="carousel-item">
			<img src="~/images/p3.jpg" class="d-block w-100" alt="..." style="width: 300px;height: 300px;">
		</div>
	</div>
	<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
		<span class="carousel-control-prev-icon" aria-hidden="true" style="background-color: lightgray; opacity: .5;"></span>
		<span class="visually-hidden">Previous</span>
	</button>
	<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
		<span class="carousel-control-next-icon" aria-hidden="true" style="background-color: lightgray; opacity: .5;"></span>
		<span class="visually-hidden">Next</span>
	</button>
</div>

<h4 style="margin-top: 100px; padding-left: 15px; color:white;"> Course Seletion </h4>
<hr style="border: 2px solid white;" />

<form class="d-flex" role="search" asp-action="Index" asp-controller="Course" method="post">
	<input class="form-control me-2" type="search" name="TeacherName" value="@ViewBag.TeacherName" placeholder="Teacher" aria-label="Teacher">
	<input class="form-control me-2" type="search" name="CourseName" value="@ViewBag.CourseName" placeholder="CourseName" aria-label="CourseName">
	<button class="btn btn-outline-success" type="submit">Search</button>
</form>


@*This section is course selection*@
<div class="row row-cols-1 row-cols-md-3 g-4" style="margin: 10px 0px 0px 0px;">
	@{
		if (Model.Count == 0)
		{
			<h4 style="color: red"> No Any Result! </h4>
		}
		else
		{
			TempData["PrintCourse"] = true;
			TempData["Count"] = Model.Count;

			for (int i = 0; i < Model.LongCount(); i++)
			{
				<div class="col">
					<div style="text-decoration: none; color: black;">
						<div class="card">
							<img src="~/images/Course.jpg" class="card-img-top" alt="..." style="width: 100%; height: 300px;">
							<div class="card-body" style="background-color: gainsboro;">
								<h5 class="card-title">@Model[i].CourseName</h5>
								<p class="card-text">
									Teacher: @Model[i].TeacherName<br />
									CourseHours: @Model[i].Hour<br />


									@{
										string id = "sh" + Model[i].Id;
										TempData[i.ToString()] = id;
										string formID = "form" + Model[i].Id;
										TempData["form" + i.ToString()] = formID;
										TempData["cou" + i.ToString()] = Model[i].CourseName;
										TempData["des" + i.ToString()] = Model[i].Description;
									}


									<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#@id">Description</button>
									@if (Context.User.Identity.IsAuthenticated == true)
									{
										<button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#@formID">
											Buy
										</button>
									}
								</p>
							</div>
						</div>
					</div>
				</div>
			}
		}
	}
</div>

<div style="display: flex; justify-content: center; align-items: center; margin-top: 50px;">
	@Html.PagedListPager((IPagedList)Model, page => Url.Action("Index", new { page }), Bootstrap4PagedListRenderOptions.ClassicPlusFirstAndLast)
</div>